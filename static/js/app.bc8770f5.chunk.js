(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{310:function(t,e,n){"use strict";var r=n(8),o=n.n(r),a=n(11),i=n.n(a),u=n(9),s=n.n(u),c=n(10),p=n.n(c),l=n(6),f=n.n(l),m=n(1),h=n.n(m),d=n(250),y=n(481),v=n(251),b=n.n(v),g=n(70),C=n(56),E=n(79),S=n(3),w=n(2),R=n(19),T=n(46);function k(t){return{type:"UPDATE_GAME",payload:t}}function U(t){return{type:"MAKE_MOVE",payload:t}}function D(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var x=function(t){s()(n,t);var e=D(n);function n(t){var r;return o()(this,n),(r=e.call(this,t)).state={name:"",code:"",nameError:!1,codeError:!1},r}return i()(n,[{key:"handleNameChange",value:function(t){this.setState({name:t,nameError:!1})}},{key:"handleCodeChange",value:function(t){this.setState({code:t,codeError:!1})}},{key:"handleCreate",value:function(){if(this.state.name){var t=this.generateCode(),e="game-"+t,n=this.state.name+"-"+e;this.props.updateGame({name:this.state.name,code:t,gameChannel:e,UUID:n}),this.props.onCreate(this.state.name)}else this.setState({nameError:!0})}},{key:"handleJoin",value:function(){if(this.state.name&&this.state.code){var t="game-"+this.state.code,e=this.state.name+"-"+t;this.props.updateGame({name:this.state.name,code:this.state.code,gameChannel:t,UUID:e}),this.props.onJoin(this.state.name,t)}else this.state.name&&!this.state.code?this.setState({codeError:!0}):!this.state.name&&this.state.code?this.setState({nameError:!0}):this.setState({nameError:!0,codeError:!0})}},{key:"generateCode",value:function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=e.length,r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*n));return t}},{key:"render",value:function(){var t=this;return h.a.createElement(S.a,{style:A.formContainer},h.a.createElement(R.a,{style:A.header},"Step 1: Enter Team Name"),h.a.createElement(E.c,{label:"Team Name",onChangeText:function(e){return t.handleNameChange(e)},containerStyle:A.input,errorMessage:this.state.nameError?"Team Name is required":null,renderErrorMessage:this.state.nameError}),h.a.createElement(R.a,{style:A.header},"Step 2: Create A Game or Join A Game"),h.a.createElement(E.a,{title:"Create",buttonStyle:A.button,onPress:function(){return t.handleCreate()}}),h.a.createElement(E.b,{style:A.divider}),h.a.createElement(E.c,{label:"Game Code",onChangeText:function(e){return t.handleCodeChange(e)},containerStyle:A.input,errorMessage:this.state.codeError?"Game Code is required to join game":null,renderErrorMessage:this.state.codeError}),h.a.createElement(E.a,{title:"Join",buttonStyle:A.button,onPress:function(){return t.handleJoin()}}))}}]),n}(m.Component),O=Object(T.b)(null,(function(t){return{updateGame:function(e){return t(k(e))}}}))(x),A=w.a.create({header:{fontSize:20,fontWeight:"bold",marginBottom:30,marginTop:10},formContainer:{paddingTop:20,paddingLeft:15,paddingRight:15},input:{marginBottom:20},button:{marginBottom:15},divider:{marginTop:30,marginBottom:30}}),M=function(t){var e=t.navigation;return h.a.createElement(C.a,null,h.a.createElement(O,{onCreate:function(t){e.navigate("Creator",{})},onJoin:function(t,n){e.navigate("Start",{isJoiner:!0})}}))},j=n(27),I=n(145),P=0,W=1,G=2,N=3;function J(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var Y=function(t){s()(n,t);var e=J(n);function n(t){return o()(this,n),e.call(this,t)}return i()(n,[{key:"componentDidMount",value:function(){var t=this;if(this.props.pubnub){this.props.pubnub.setUUID(this.props.UUID);var e={message:function(e){if(e.message.content.event==P){var n={content:{event:W,name:t.props.name},id:Math.random().toString(16).substr(2)};t.props.pubnub.publish({channel:t.props.gameChannel,message:n}),t.props.updateGame({opponentName:e.message.content.name}),t.props.goToStart()}}};this.props.pubnub.addListener(e),this.props.pubnub.subscribe({channels:[this.props.gameChannel]})}}},{key:"componentWillUnmount",value:function(){this.props.pubnub&&this.props.pubnub.unsubscribeAll()}},{key:"render",value:function(){var t=this;return h.a.createElement(S.a,null,h.a.createElement(R.a,{style:L.codeText},"Welcome ",this.props.name),h.a.createElement(R.a,{style:L.codeText},"Share This Code With Your Opponent"),h.a.createElement(R.a,{style:L.codeText},this.props.code),h.a.createElement(j.a,{onPress:function(){return I.a.setString(t.props.code)}},h.a.createElement(R.a,{style:[L.codeText,{color:"blue"}]},"Copy Code To Clipboard")))}}]),n}(m.Component),B=Object(T.b)((function(t){return t}),(function(t){return{updateGame:function(e){return t(k(e))}}}))(Y),L=w.a.create({codeText:{textAlign:"center",marginTop:15,marginBottom:15,fontSize:20,fontWeight:"bold"}}),_=function(t){var e=t.navigation,n=Object(g.b)();return h.a.createElement(C.a,null,h.a.createElement(B,{pubnub:n,goToStart:function(){e.navigate("Start",{})}}))};function q(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var K=function(t){s()(n,t);var e=q(n);function n(t){var r;return o()(this,n),(r=e.call(this,t)).state={displayStartOptions:!r.props.isJoiner},r}return i()(n,[{key:"componentDidMount",value:function(){var t=this;if(this.props.pubnub){this.props.pubnub.setUUID(this.props.UUID);var e={message:function(e){e.message.content.event==W&&t.props.isJoiner&&(t.props.updateGame({opponentName:e.message.content.name}),t.setState({displayStartOptions:!0})),e.message.content.event==G&&(e.message.content.player==t.props.name?t.props.onYouStart():t.props.onOpponentStart())}};if(this.props.pubnub.addListener(e),this.props.pubnub.subscribe({channels:[this.props.gameChannel]}),this.props.isJoiner){var n={content:{event:P,name:this.props.name},id:Math.random().toString(16).substr(2)};this.props.pubnub.publish({channel:this.props.gameChannel,message:n})}}}},{key:"componentWillUnmount",value:function(){this.props.pubnub&&this.props.pubnub.unsubscribeAll()}},{key:"handleYouStart",value:function(){this.props.onYouStart();var t={content:{event:G,player:this.props.name},id:Math.random().toString(16).substr(2)};this.props.pubnub.publish({channel:this.props.gameChannel,message:t})}},{key:"handleOpponentStart",value:function(){this.props.onOpponentStart();var t={content:{event:G,player:this.props.opponentName},id:Math.random().toString(16).substr(2)};this.props.pubnub.publish({channel:this.props.gameChannel,message:t})}},{key:"render",value:function(){var t=this;return h.a.createElement(S.a,{style:F.screenContainer},h.a.createElement(R.a,{style:F.standardText},"Welcome ",this.props.name,"!"),!this.state.displayStartOptions&&h.a.createElement(R.a,{style:F.standardText},"Waiting For Your Opponent To Join The Game..."),this.state.displayStartOptions&&h.a.createElement(S.a,null,h.a.createElement(R.a,{style:F.standardText},"Your opponent is ",this.props.opponentName),h.a.createElement(R.a,{style:F.standardText},"Choose who starts"),h.a.createElement(E.a,{title:this.props.name+" Starts",buttonStyle:F.button,onPress:function(){return t.handleYouStart()}}),h.a.createElement(E.a,{title:this.props.opponentName+" Starts",buttonStyle:F.button,onPress:function(){return t.handleOpponentStart()}})))}}]),n}(m.Component),z=Object(T.b)((function(t){return t}),(function(t){return{updateGame:function(e){return t(k(e))}}}))(K),F=w.a.create({screenContainer:{paddingTop:20,paddingLeft:15,paddingRight:15},standardText:{textAlign:"center",marginTop:15,marginBottom:15,fontSize:20,fontWeight:"bold"},button:{marginBottom:15}}),V=function(t){var e=t.route,n=t.navigation,r=Object(g.b)();return h.a.createElement(C.a,null,h.a.createElement(z,{isJoiner:e.params.isJoiner,pubnub:r,onYouStart:function(){n.navigate("Your Turn",{})},onOpponentStart:function(){n.navigate("Opponents Turn",{})}}))},$=n(21),H=n.n($),Q=n(39);function X(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var Z=function(t){s()(r,t);var e=X(r);function r(t){return o()(this,r),e.call(this,t)}return i()(r,[{key:"toggleCup",value:function(){this.props.player===this.props.name&&(this.props.makeMove({player:this.props.name,row:this.props.row,column:this.props.column}),this.props.onUpdateCups(this.props.row,this.props.column))}},{key:"render",value:function(){var t=this,e=this.props.active?this.props.player===this.props.name?n(453):n(454):n(452);return h.a.createElement(j.a,{style:et.cupContainer,onPress:function(){return t.toggleCup()},disabled:this.props.player!==this.props.name},h.a.createElement(Q.a,{style:et.cup,source:e}))}}]),r}(m.Component),tt=Object(T.b)((function(t){return t}),(function(t){return{makeMove:function(e){return t(U(e))}}}))(Z),et=w.a.create({cup:{width:"180%",height:"180%",marginTop:"-45%",marginLeft:"-45%"},cupContainer:{overflow:"visible",width:"100%",height:"100%"}});function nt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var rt=n(187).vw,ot=function(t){s()(n,t);var e=nt(n);function n(t){return o()(this,n),e.call(this,t)}return i()(n,[{key:"render",value:function(){var t=this;return h.a.createElement(S.a,{style:at.square},this.props.hasCup&&h.a.createElement(tt,{key:"cup"+this.props.row+this.props.column,player:this.props.player,row:this.props.row,column:this.props.column,active:this.props.active,onUpdateCups:function(e,n){return t.props.onUpdateCups(e,n)}}))}}]),n}(m.Component),at=w.a.create({square:{width:rt(10),height:rt(10)}});function it(t){var e=0;if("undefined"===typeof Symbol||null==t["function"===typeof Symbol?Symbol.iterator:"@@iterator"]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"===typeof t)return ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(t,e)}(t)))return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t["function"===typeof Symbol?Symbol.iterator:"@@iterator"]()).next.bind(e)}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function st(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var ct=n(187).vw;var pt=function(t){s()(n,t);var e=st(n);function n(t){return o()(this,n),e.call(this,t)}return i()(n,[{key:"componentDidMount",value:function(){this.props.pubnub&&(this.props.pubnub.setUUID(this.props.UUID),this.props.pubnub.subscribe({channels:[this.props.gameChannel]}))}},{key:"componentWillUnmount",value:function(){this.props.pubnub&&this.props.pubnub.unsubscribeAll()}},{key:"getCup",value:function(t,e){for(var n,r=it(this.props.cups);!(n=r()).done;){var o=n.value;if(o.row===t&&o.column===e)return o}return null}},{key:"handleUpdateCups",value:function(t,e){var n={content:{event:N,player:this.props.name,row:t,column:e},id:Math.random().toString(16).substr(2)};this.props.pubnub.publish({channel:this.props.gameChannel,message:n})}},{key:"render",value:function(){var t=this,e=H()(Array(7).keys()),n=e.map((function(n){return e.map((function(e){var r=t.getCup(n,e);return h.a.createElement(ot,{key:"square"+n+e,player:t.props.name,row:n,column:e,hasCup:null!==r,active:!!r&&r.active,onUpdateCups:function(e,n){return t.handleUpdateCups(e,n)}})}))}));return h.a.createElement(S.a,{style:ft.screenContainer},h.a.createElement(S.a,{style:ft.grid},n))}}]),n}(m.Component),lt=Object(T.b)((function(t){return t}))(pt),ft=w.a.create({screenContainer:{paddingTop:ct(10),paddingBottom:ct(10),paddingLeft:15,paddingRight:15,justifyContent:"center",alignItems:"center"},grid:{width:ct(70),display:"flex",flexDirection:"row",flexWrap:"wrap"}}),mt=function(t){t.navigation;var e=Object(g.b)();return h.a.createElement(C.a,null,h.a.createElement(lt,{pubnub:e}))};function ht(t){var e=0;if("undefined"===typeof Symbol||null==t["function"===typeof Symbol?Symbol.iterator:"@@iterator"]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"===typeof t)return dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(t,e)}(t)))return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t["function"===typeof Symbol?Symbol.iterator:"@@iterator"]()).next.bind(e)}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var vt=n(187).vw;var bt=function(t){s()(n,t);var e=yt(n);function n(t){return o()(this,n),e.call(this,t)}return i()(n,[{key:"componentDidMount",value:function(){var t=this;if(this.props.pubnub){this.props.pubnub.setUUID(this.props.UUID);var e={message:function(e){e.message.content.event==N&&e.message.content.player!==t.props.player&&t.props.makeMove({player:e.message.content.player,row:e.message.content.row,column:e.message.content.column})}};this.props.pubnub.addListener(e),this.props.pubnub.subscribe({channels:[this.props.gameChannel]})}}},{key:"componentWillUnmount",value:function(){this.props.pubnub&&this.props.pubnub.unsubscribeAll()}},{key:"getCup",value:function(t,e){for(var n,r=ht(this.props.opponentCups);!(n=r()).done;){var o=n.value;if(o.row===t&&o.column===e)return o}return null}},{key:"render",value:function(){var t=this,e=H()(Array(7).keys()),n=e.map((function(n){return e.map((function(e){var r=6-n,o=6-e,a=t.getCup(r,o);return h.a.createElement(ot,{key:"square"+r+o,player:t.props.opponentName,row:r,column:o,hasCup:null!==a,active:!!a&&a.active,onUpdateCups:function(e,n){return t.handleUpdateCups(e,n)}})}))}));return h.a.createElement(S.a,{style:Ct.screenContainer},h.a.createElement(S.a,{style:Ct.grid},n))}}]),n}(m.Component),gt=Object(T.b)((function(t){return t}),(function(t){return{makeMove:function(e){return t(U(e))}}}))(bt),Ct=w.a.create({screenContainer:{paddingTop:vt(10),paddingLeft:15,paddingRight:15,paddingBottom:vt(10),justifyContent:"center",alignItems:"center"},grid:{width:vt(70),display:"flex",flexDirection:"row",flexWrap:"wrap"}}),Et=function(t){t.navigation;var e=Object(g.b)();return h.a.createElement(C.a,null,h.a.createElement(gt,{pubnub:e}))},St=n(106),wt=n(303),Rt=n(304),Tt=n(7),kt=n.n(Tt),Ut={value:0,name:"Standard",size:10,cups:[{row:0,column:0,active:!0},{row:0,column:2,active:!0},{row:0,column:4,active:!0},{row:0,column:6,active:!0},{row:2,column:1,active:!0},{row:2,column:3,active:!0},{row:2,column:5,active:!0},{row:4,column:2,active:!0},{row:4,column:4,active:!0},{row:6,column:3,active:!0}]},Dt={name:"",opponentName:"",gameChannel:"",UUID:"",code:"",cups:Ut.cups,opponentCups:Ut.cups};function xt(t,e,n){return t=t.map((function(t){return t.row===e&&t.column===n&&(t.active=!t.active),t}))}var Ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,e=arguments.length>1?arguments[1]:void 0;if("UPDATE_GAME"===e.type)return kt()({},t,e.payload);if("MAKE_MOVE"===e.type){var n=e.payload.player===t.name?H()(t.cups):H()(t.opponentCups),r=xt(n,e.payload.row,e.payload.column);return e.payload.player===t.name?kt()({},t,{cups:r}):kt()({},t,{opponentCups:r})}return t};function At(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var Mt=Object(St.createStore)(Ot,Object(Rt.composeWithDevTools)(Object(St.applyMiddleware)(wt.a))),jt=Object(y.a)(),It=new b.a({subscribeKey:"sub-c-1caa123c-8678-11ea-885f-2621b2dc68c7",publishKey:"pub-c-cbe88329-b9ae-47ef-8470-0a088c87c8ae"}),Pt=function(t){s()(n,t);var e=At(n);function n(t){return o()(this,n),e.call(this,t)}return i()(n,[{key:"render",value:function(){return h.a.createElement(T.a,{store:Mt},h.a.createElement(d.a,null,h.a.createElement(g.a,{client:It},h.a.createElement(jt.Navigator,{initialRouteName:"Welcome"},h.a.createElement(jt.Screen,{name:"Welcome",component:M,options:{title:"Welcome To BIP"}}),h.a.createElement(jt.Screen,{name:"Creator",component:_,options:{title:"Game Code"}}),h.a.createElement(jt.Screen,{name:"Start",component:V,options:{title:"Choose Start"}}),h.a.createElement(jt.Screen,{name:"Your Turn",component:mt,options:{title:"Your Turn"}}),h.a.createElement(jt.Screen,{name:"Opponents Turn",component:Et,options:{title:"Opponent's Turn"}})))))}}]),n}(m.Component);e.a=Pt},318:function(t,e,n){n(319),t.exports=n(472)},319:function(t,e){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/bip-mobile/expo-service-worker.js",{scope:"/bip-mobile/"}).then((function(t){})).catch((function(t){console.info("Failed to register service-worker",t)}))}))},452:function(t,e,n){t.exports=n.p+"static/media/circle_PNG6.4c461aef.png"},453:function(t,e,n){t.exports=n.p+"static/media/circle_PNG3.d08d37ed.png"},454:function(t,e,n){t.exports=n.p+"static/media/circle_PNG4.522bee4a.png"}},[[318,1,2]]]);
//# sourceMappingURL=app.bc8770f5.chunk.js.map